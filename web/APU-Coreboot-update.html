
<!DOCTYPE html>
<html>
<head>
    <title>ICT Wiki</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<style>
body, html  {
background-color: #ddd;
margin: 10px;
}

pre {
  display: block;
  color: white;
  background-color: black;
  max-width: 800px;
  min-width: 100px;
  padding: 10px;
  border-radius: 5px;
}

h1  {
font-size: 26px;
}

a   {
text-decoration: none;
}
#stamp  {
font-size: 8px;
}
</style>
</head>
<body>
<a href="index.html">back</a><h1>apu coreboot update</h1>
<!-- date: 2019-12-12 00:00:00 -->
<!-- category: apu -->
<!-- tags: apu,pcengines,coreboot -->

<h3>Links</h3>
<ul>
<li>Home: <a href="https://www.pcengines.ch">pcengines.ch</a><br></li>
<li>CH Shop: <a href="https://www.pcengines.ch/newshop.php?c=48881">https://www.pcengines.ch/newshop.php?c=48881</a><br></li>
<li>Howto: <a href="https://pcengines.ch/howto.htm">https://pcengines.ch/howto.htm</a><br></li>
<li>Github rom releases: <a href="https://pcengines.github.io">https://pcengines.github.io</a><br></li>
</ul>
<h3>Update coreboot rom</h3>
<p>Install flushrom on your device:<br></p>
<p>for CentOS
    <pre>yum -y install flashrom</pre>
    <br>
    FreeBSD / Opnsense
    <pre>pkg install flushrom</pre>
    <br>
    Check APU Version
    <pre>dmidecode |less </p>
<blockquote>
<p>BIOS Information        Vendor: coreboot        Version: 4.0.7 
System Information        Manufacturer: PC Engines        Product Name: APU3        Version: 1.0</pre>
Find current coreboot release:<br></p>
</blockquote>
<p><a href="https://pcengines.github.io" target="_blank">https://pcengines.github.io</a><br>
<a href="https://3mdeb.com/open-source-firmware/pcengines/" target="_blank">https://3mdeb.com/open-source-firmware/pcengines/</a>
<br><br>
Download to your device:
<br>
e.g.</p>
<pre>wget https://3mdeb.com/open-source-firmware/pcengines/apu2/apu2_v4.11.0.1.rom</pre>
<p>Install</p>
<pre>flashrom -w /tmp/apu2_v4.11.0.1.rom -p internal</pre>
<p><em>Output</em></p>
<pre>flashrom -w apu3_v4.11.0.1.rom -p internal flashrom v1.0.1 on Linux 3.10.0-957.27.2.el7.x86_64 (x86_64) flashrom is free software,<br>get the source code at https://flashrom.org Using clock_gettime for delay loops (clk_id: 1, resolution: 1ns). coreboot table found <br>at 0xdffae000. Found chipset "AMD FCH". Enabling flash write... OK. Found Winbond flash chip "W25Q64.V" (8192 kB, SPI) mapped at <br>physical address 0x00000000ff800000. This coreboot image (PC Engines:apu3) does not appear to be correct for the detected mainboard 
    (PC Engines:PCEngines apu3). Aborting. You can override this with -p internal:boardmismatch=force.</pre>

<p>bash</p>
<pre>flashrom -w /tmp/apu2_v4.11.0.1.rom -p internal:boardmismatch=force</pre>
<body>
</html>